@import controllers.agent.Representation.ManagePropertiesVM

@(model: ManagePropertiesVM)(implicit request: Request[_], messages: Messages)

@main_template(Messages("agent.dashboard.manageProperties.title")) {
                <a class="link-back link-header" href="@routes.Dashboard.home" id="home">@Messages("link.dashboard.home")</a>
                <h1 class="heading-large">
                    @Messages("agent.dashboard.manageProperties.title")
                </h1>

        @if(model.propertyRepresentations.exists(_.pending)) {
            <table class="table-font-xsmall">
                <caption class="heading-medium">@Messages("manageProperties.pendingRequests")</caption>
                <tbody>
                    <tr>
                        <th scope="col">@Messages("representationRequests.table.1")</th>
                        <th scope="col">@Messages("representationRequests.table.2")</th>
                        <th scope="col">@Messages("representationRequests.table.3")</th>
                        <th scope="col">@Messages("representationRequests.table.4")</th>
                        <th scope="col">@Messages("representationRequests.table.5")</th>
                        <th scope="col"></th>
                        <th scope="col"></th>
                    </tr>
                    @model.propertyRepresentations.filter(_.pending).map { p =>
                        <tr>
                            <td scope="row">@p.groupName</td>
                            <td>@p.address.toString</td>
                            <td>@Messages(p.canCheck.msgKey)</td>
                            <td>@Messages(p.canChallenge.msgKey)</td>
                            <td></td>
                            <td>
                                <a role="button" href=@controllers.agent.routes.Representation.accept(p.representationId)>
                                    @Messages("agent.dashboard.manageProperties.accept")
                                </a>
                            </td>
                            <td>
                                <a role="button" href=@controllers.agent.routes.Representation.reject(p.representationId)>
                                    @Messages("agent.dashboard.manageProperties.reject")
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        } else {
            <p>
                @Messages("manageProperties.nonePending")
            </p>
        }


        @if(model.propertyRepresentations.exists(!_.pending)) {
            <br/>
            <table class="table-font-xsmall">
                <caption class="heading-medium">
                     @Messages("manageProperties.representations")
                </caption>
                <thead>
                    <tr>
                        <th scope="col">@Messages("propertyRepresentations.table.1")</th>
                        <th scope="col">@Messages("propertyRepresentations.table.2")</th>
                        <th scope="col">@Messages("propertyRepresentations.table.3")</th>
                    </tr>
                </thead>
                <tbody>
                    @model.propertyRepresentations.filterNot(_.pending).groupBy(_.groupName).map { case (groupName, properties) =>
                        <tr>
                            <td scope="row">@groupName</td>
                            <td>
                                <a href="#">
                                    @properties.size
                                </a>
                            </td>
                            <td>0</td>
                        </tr>
                    }
                </tbody>
            </table>
        }

    <p><a class="link-back" href="@routes.Dashboard.home" id="home">@Messages("link.dashboard.home")</a></p>
}
