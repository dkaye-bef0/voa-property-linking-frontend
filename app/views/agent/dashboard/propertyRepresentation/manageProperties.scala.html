@import controllers.agent.Representation.ManagePropertiesVM

@(model: ManagePropertiesVM)(implicit request: Request[_], messages: Messages)

@main_template(Messages("agent.dashboard.manageProperties.title")) {
    <main id="content">
        <div class="grid-row">
            <div class="column-two-thirds">
                <h1 class="form-title heading-xlarge">
                    <span class="section-title">@Messages("agent.dashboard.manageProperties.title")</span>
                </h1>
            </div>
        </div>

        <p>
        @Messages("p.agentCode", model.agentCode)
        </p>

        @if(model.propertyRepresentations.exists(_.pending)) {
            <h2 class="heading-medium">@Messages("manageProperties.pendingRequests")</h2>
            <table class="table">
                <tbody>
                    <tr>
                        <td>@Messages("propertyRepresentations.table.1")</td>
                        <td>@Messages("propertyRepresentations.table.2")</td>
                        <td>@Messages("propertyRepresentations.table.3")</td>
                        <td>@Messages("propertyRepresentations.table.4")</td>
                        <td></td>
                        <td></td>
                    </tr>
                    @model.propertyRepresentations.filter(_.pending).map { p =>
                        <tr>
                            <td>@p.groupName</td>
                            <td>@p.address.toString</td>
                            <td>@Messages(p.canCheck.msgKey)</td>
                            <td>@Messages(p.canChallenge.msgKey)</td>
                            <td>
                                <a class="button" href=@controllers.agent.routes.Representation.accept(p.representationId)>
                                @Messages("agent.dashboard.manageProperties.accept")
                                </a>
                            </td>
                            <td>
                                <a class="button" href=@controllers.agent.routes.Representation.reject(p.representationId)>
                                @Messages("agent.dashboard.manageProperties.reject")
                                </a>


                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        } else {
            <p>
                @Messages("manageProperties.nonePending")
            </p>
        }

        <br/>

        @if(model.propertyRepresentations.exists(!_.pending)) {
            <h2 class="heading-medium">@Messages("manageProperties.representations")</h2>
            <table class="table">
                <thead>
                    <tr>
                        <td>@Messages("propertyRepresentations.table.1")</td>
                        <td>@Messages("propertyRepresentations.table.2")</td>
                        <td>@Messages("propertyRepresentations.table.3")</td>
                        <td>@Messages("propertyRepresentations.table.4")</td>
                    </tr>
                </thead>
                <tbody>
                    @model.propertyRepresentations.filterNot(_.pending).map { p =>
                        <tr>
                            <td>@p.groupName</td>
                            <td>@p.address.toString</td>
                            <td>@Messages(p.canCheck.msgKey)</td>
                            <td>@Messages(p.canChallenge.msgKey)</td>
                        </tr>
                    }
                </tbody>
            </table>
        }

    </main>
}
