@import controllers.agent.RepresentationController.ManagePropertiesVM

@(model: ManagePropertiesVM)(implicit request: Request[_], messages: Messages)

@main_template(
    Messages("agent.dashboard.manageClients.title"),
    topBackLink = true,
    bottomBackLink = true
) {


    <h1 class="heading-xlarge margin-bottom-0 clear-right">
        <span class="section-title">@Messages("agent.dashboard.manageClients.title")</span>
        <span class="heading-secondary">
            @if(model.propertyRepresentations.totalPendingRequests == 0) {
                @Messages("manageClients.nonePending")
            } else {
                <a href="@controllers.agent.routes.RepresentationController.pendingRepresentationRequest">
                    @Messages("manageClients.noOfPending", model.propertyRepresentations.totalPendingRequests)
                </a>
            }
        </span>
    </h1>


    @if(model.propertyRepresentations.propertyRepresentations.nonEmpty) {
        <div class="table-wrapper">
            <table class="table-font-xsmall">
                <caption class="heading-medium">
                    @Messages("agent.dashboard.manageClients.existingClients")
                </caption>
                <thead>
                    <tr>
                        <th scope="col">@Messages("propertyRepresentations.table.1")</th>
                        <th scope="col">@Messages("propertyRepresentations.table.2")</th>
                    </tr>
                </thead>
                <tbody>
                @model.propertyRepresentations.propertyRepresentations.groupBy(_.organisationName).map { case (groupName, properties) =>
                <tr>
                    <td>@groupName</td>
                    <td>
                        @properties.size
                    </td>
                </tr>
                }
                </tbody>
            </table>
        </div>
    } else {
        @Messages("agent.dashboard.manageClients.noClients")
    }

}
